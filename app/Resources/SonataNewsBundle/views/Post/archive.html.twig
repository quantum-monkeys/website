{% extends 'AppBundle::base.html.twig' %}

{% block body %}
    <div class="container">
        {% block sonata_page_breadcrumb %}
            <div class="row-fluid clearfix">
                {{ sonata_block_render_event('breadcrumb', { 'context': 'news_archive', 'collection': collection, 'tag': tag, 'current_uri': app.request.requestUri }) }}
            </div>
        {% endblock %}

        <div class="row">
            <div class="col-xs-12 col-sm-8 col-md-8 col-lg-8">
                {% for post in pager.getResults() %}
                    <div class="post">
                        <div class="blog-img-detail"><!--blog-img-detail-->
                            {% media post.image, 'wide' with {
                                class: 'img-responsive'
                            } %}
                        </div>
                        <!--End-->
                        <div class="blog-title">
                            <h3><a href="{{ url('sonata_news_view', { 'permalink': sonata_news_permalink(post) }) }}">{{ post.title }}</a></h3>
                        </div>
                        <!--End-->
                        <div class="blog-details-content">
                            <p>{{ post.abstract|nl2br }}</p>
                        </div>
                        <!--End-->
                        <div class="blogs">
                            <div class="blog-detail-share blogs"><!--blog-detail-share-->
                                <ul class="col-xs-12 col-sm-12">
                                    <li>
                                        <i class="fa fa-comments" aria-hidden="true"></i><span> {{ post.commentsCount }}</span>
                                    </li>
                                    <li>
                                        Tags:
                                        {% for tag in post.tags %}
                                            <a href="{{ url('sonata_news_tag', { 'tag': tag.slug } ) }}">{{ tag.name }}</a>
                                        {% else %}
                                            No tags
                                        {% endfor %}
                                    </li>
                                    <li>
                                        <i class="fa fa-calendar" aria-hidden="true"></i>
                                        <span>{{ post.publicationDateStart|localizeddate('short', 'none') }}</span>
                                    </li>
                                    <li><i class="fa fa-pencil" aria-hidden="true"></i> {{ post.author }}</li>
                                    <li>
                                        <a href="{{ url('sonata_news_view', { 'permalink': sonata_news_permalink(post) }) }}">
                                            <i class="fa fa-plus-circle" aria-hidden="true"></i>
                                            <span>Read More</span>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                            <!--End-->
                        </div>
                    </div>
                    <div class="clear"></div>
                {% else %}
                    {{ 'no_post_found'|trans({}, 'SonataNewsBundle') }}
                {% endfor %}

                <ul class="pager">
                    <li{% if pager.page == pager.lastPage %} class="disabled"{% endif %}><a href="{{ url(route, route_parameters|merge({'page': pager.nextpage})) }}" title="{{ 'link_previous_page'|trans({}, 'SonataNewsBundle') }}">{{ 'link_previous_page'|trans({}, 'SonataNewsBundle') }}</a>
                    <li{% if pager.page == pager.firstPage %} class="disabled"{% endif %}><a href="{{ url(route, route_parameters|merge({'page': pager.previouspage})) }}" title="{{ 'link_next_page'|trans({}, 'SonataNewsBundle') }}">{{ 'link_next_page'|trans({}, 'SonataNewsBundle') }}</a></li>
                </ul>
            </div>
        </div>
    </div>
{% endblock %}
